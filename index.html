<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART MATH LAB ‚Äì Candy Order Puzzle</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb, #4facfe, #00f2fe);
            overflow-x: hidden;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f, #c44569);
            box-shadow: 0 10px 35px rgba(0,0,0,0.3);
            border-bottom: 6px solid #ffd93d;
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .header h1 {
            margin: 0;
            font-size: 48px;
            font-weight: 800;
            color: white;
            letter-spacing: 2px;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.4);
            display: inline-block;
        }

        .header img {
            height: 70px;
            margin-top: 15px;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
        }

        .subtitle {
            margin: 20px 0;
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }

        .candy-image-container {
            text-align: center;
            padding: 30px 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(12px);
            border-radius: 30px;
            margin: 30px auto;
            max-width: 700px;
            width: 90%;
            border: 4px dashed rgba(255,255,255,0.6);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        .candy-image-container img {
            width: 100%;
            max-width: 450px;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: grab;
            transition: all 0.2s ease;
        }

        .candy-image-container img:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .candy-image-container img.over {
            transform: scale(1.1);
            box-shadow: 0 20px 50px rgba(255,100,0,0.6);
        }

        .game-container {
            text-align: center;
            margin-top: 30px;
            padding: 0 15px;
        }

        .instruction {
            font-size: 32px;
            font-weight: 800;
            color: white;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            padding: 20px;
            background: linear-gradient(135deg, rgba(255,107,107,0.9), rgba(255,215,0,0.9));
            border-radius: 15px;
            border: 3px solid rgba(255,255,255,0.5);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .numbers {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            padding: 0 20px;
        }

        .tile {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            box-shadow: 0 8px 20px rgba(255,107,107,0.4);
            border-radius: 18px;
            font-size: 38px;
            font-weight: 900;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
            border: 3px solid #ff9999;
        }

        .tile:hover {
            transform: scale(1.08) translateY(-5px);
            box-shadow: 0 12px 30px rgba(255,107,107,0.6);
        }

        .tile:active {
            transform: scale(1.05);
            cursor: grabbing;
            box-shadow: 0 5px 12px rgba(255,107,107,0.4);
        }

        .btn {
            margin-top: 25px;
            padding: 15px 50px;
            font-size: 22px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f, #c44569);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 900;
            box-shadow: 0 8px 25px rgba(255,107,107,0.4);
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255,107,107,0.6);
        }

        .btn:active {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(255,107,107,0.4);
        }

        #result {
            margin-top: 20px;
            margin-bottom: 30px;
            font-size: 32px;
            font-weight: 900;
            opacity: 0;
            transition: opacity 0.6s ease;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255,255,255,0.95);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            letter-spacing: 1px;
        }

        #result.success {
            color: #00b894;
            background: rgba(0,184,148,0.2);
            border: 3px solid rgba(0,184,148,0.5);
        }

        #result.error {
            color: #d63031;
            background: rgba(214,48,49,0.2);
            border: 3px solid rgba(214,48,49,0.5);
        }

        .game-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: #ffd93d;
            padding: 30px 40px;
            border-radius: 15px;
            font-size: 28px;
            font-weight: 800;
            text-align: center;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            box-shadow: 0 0 30px rgba(255,217,61,0.5);
        }

        .game-message.show {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 36px;
            }

            .tile {
                width: 70px;
                height: 70px;
                font-size: 28px;
            }

            .candy-image-container img {
                max-width: 300px;
            }
        }
    </style>
</head>

<body>

<div class="game-message" id="gameMessage"></div>

<div class="header">
    <h1>SMART MATH LAB</h1>
    <img src="images/logo.png" alt="Smart Math Lab Logo">
</div>

<div class="subtitle">üéÆ Welcome to the Candy Math Challenge! üéÆ</div>

<div class="game-container">
    <div class="instruction" id="title"></div>

    <div class="numbers" id="numbers"></div>

    <div class="candy-image-container">
        <img src="images/candy.png" alt="Candy Model" id="candyImage" ondragover="dragOverCandy(event)" ondrop="dropOnCandy(event)" ondragleave="dragLeaveCandy(event)">
    </div>

    <button class="btn" onclick="checkAnswer()">‚ú® CHECK ‚ú®</button>

    <div id="result"></div>
</div>

<script>
let puzzles = [
    [2, 5, 8, 3, 7],
    [12, 4, 15, 9, 1],
    [6, 18, 2, 13, 11]
];

let mode = ["ASCENDING", "DESCENDING"];

let currentPuzzle, correctOrder, droppedNumbers = [];

function loadPuzzle() {
    document.getElementById("result").style.opacity = 0;
    document.getElementById("result").classList.remove('success', 'error');
    droppedNumbers = [];

    currentPuzzle = puzzles[Math.floor(Math.random() * puzzles.length)];
    let gameMode = mode[Math.floor(Math.random() * mode.length)];

    document.getElementById("title").innerHTML =
        `Arrange in <span style="color:#e21818;">‚≠ê ${gameMode} ‚≠ê</span> order on the candy!`;

    correctOrder = [...currentPuzzle];
    correctOrder.sort((a, b) => gameMode === "ASCENDING" ? a - b : b - a);

    loadTiles();
}

function loadTiles() {
    let area = document.getElementById("numbers");
    area.innerHTML = "";

    currentPuzzle.forEach((n) => {
        let div = document.createElement("div");
        div.className = "tile";
        div.draggable = true;
        div.id = "t" + n;
        div.textContent = n;
        div.addEventListener("dragstart", dragStart);
        area.appendChild(div);
    });
}

function dragStart(e) {
    e.dataTransfer.effectAllowed = "move";
    e.dataTransfer.setData("text", e.target.id);
}

function dragOverCandy(e) {
    e.preventDefault();
    e.dataTransfer.dropEffect = "move";
    document.getElementById("candyImage").classList.add("over");
}

function dragLeaveCandy(e) {
    document.getElementById("candyImage").classList.remove("over");
}

function dropOnCandy(e) {
    e.preventDefault();
    document.getElementById("candyImage").classList.remove("over");

    let id = e.dataTransfer.getData("text");
    let tile = document.getElementById(id);

    if (tile) {
        let num = parseInt(tile.textContent);
        droppedNumbers.push(num);
        
        // Show game message
        showMessage(`üéØ Great! You dropped ${num}! üéØ`);
    }
}

function showMessage(msg) {
    let msgBox = document.getElementById("gameMessage");
    msgBox.textContent = msg;
    msgBox.classList.add("show");
    setTimeout(() => {
        msgBox.classList.remove("show");
    }, 1500);
}

function checkAnswer() {
    if (droppedNumbers.length === 0) {
        showMessage("Drag numbers to the candy! üìç");
        return;
    }

    let result = document.getElementById("result");

    if (JSON.stringify(droppedNumbers) === JSON.stringify(correctOrder)) {
        result.classList.add('success');
        result.innerHTML = "‚úÖ CORRECT! YOU'RE A MATH CHAMPION! üèÜüéâüéâ";
        showMessage("üéä AMAZING! YOU WON! üéä");
    } else {
        result.classList.add('error');
        result.innerHTML = "‚ùå NOT QUITE! TRY AGAIN! üí™";
        showMessage("Try again! You can do it! üí™");
    }

    result.style.opacity = 1;
    setTimeout(loadPuzzle, 3000);
}

loadPuzzle();
</script>

</body>
</html>
