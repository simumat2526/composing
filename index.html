<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART MATH LAB ‚Äì Candy Order Puzzle</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            overflow-x: hidden;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f, #c44569);
            box-shadow: 0 10px 35px rgba(0,0,0,0.3);
            border-bottom: 6px solid #ffd93d;
        }

        .header h1 {
            margin: 0;
            font-size: 52px;
            font-weight: 800;
            color: white;
            letter-spacing: 3px;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.4);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }

        .header img {
            height: 70px;
            margin-top: 15px;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3));
            animation: spin 4s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .subtitle {
            margin: 20px 0;
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.85; transform: scale(1.05); }
        }

        .candy-image-container {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(12px);
            border-radius: 40px;
            margin: 30px auto;
            max-width: 700px;
            width: 90%;
            border: 4px dashed rgba(255,255,255,0.6);
            box-shadow: inset 0 0 30px rgba(255,255,255,0.2), 0 15px 40px rgba(0,0,0,0.2);
            animation: fadeInDown 0.8s ease;
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .candy-image-container img {
            width: 100%;
            max-width: 450px;
            height: auto;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
            cursor: grab;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 8px 20px rgba(255,215,0,0.6));
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
            50% { transform: translateY(-20px) rotate(3deg) scale(1.02); }
        }

        .candy-image-container img:hover {
            transform: scale(1.12) rotate(-3deg) translateY(-25px);
            filter: drop-shadow(0 12px 35px rgba(255,100,0,0.9)) brightness(1.15) saturate(1.3);
            box-shadow: 0 25px 60px rgba(255,100,0,0.5);
        }

        .candy-image-container img.over {
            transform: scale(1.2) rotate(8deg) translateY(-30px);
            filter: drop-shadow(0 15px 45px rgba(255,50,0,1)) brightness(1.3) saturate(1.5);
            box-shadow: 0 30px 70px rgba(255,50,0,0.7);
            animation: pulse-drop 0.6s ease;
        }

        @keyframes pulse-drop {
            0%, 100% { filter: drop-shadow(0 15px 45px rgba(255,50,0,1)); }
            50% { filter: drop-shadow(0 15px 45px rgba(255,150,0,1.5)); }
        }

        .game-container {
            text-align: center;
            margin-top: 30px;
            padding: 0 15px;
        }

        .instruction {
            font-size: 36px;
            font-weight: 900;
            color: white;
            margin-bottom: 25px;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.5);
            padding: 20px;
            background: linear-gradient(135deg, rgba(255,107,107,0.9), rgba(255,215,0,0.9));
            border-radius: 20px;
            border: 3px solid rgba(255,255,255,0.5);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: slideIn 0.7s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .candy-stand {
            width: 95%;
            max-width: 950px;
            margin: auto;
            background: linear-gradient(135deg, rgba(255,255,255,0.97), rgba(240,248,255,0.97));
            padding: 40px;
            border-radius: 35px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
            border: 5px solid rgba(255,215,0,0.7);
            backdrop-filter: blur(8px);
            animation: fadeInUp 0.9s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .candies {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 35px;
            flex-wrap: wrap;
        }

        .candy {
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: scaleIn 0.7s ease backwards;
        }

        .candy:nth-child(1) { animation-delay: 0.1s; }
        .candy:nth-child(2) { animation-delay: 0.2s; }
        .candy:nth-child(3) { animation-delay: 0.3s; }
        .candy:nth-child(4) { animation-delay: 0.4s; }
        .candy:nth-child(5) { animation-delay: 0.5s; }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.6); }
            to { opacity: 1; transform: scale(1); }
        }

        .stick {
            width: 30px;
            border-radius: 30px;
            margin-top: -15px;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.3), 0 8px 20px rgba(0,0,0,0.25);
        }

        .c1 { background: linear-gradient(180deg, #ffd95a, #ffb300); height: 130px; animation: sway1 3.5s ease-in-out infinite; }
        .c2 { background: linear-gradient(180deg, #32d4ff, #0097a7); height: 180px; animation: sway2 3.5s ease-in-out infinite; }
        .c3 { background: linear-gradient(180deg, #9be36a, #689f38); height: 210px; animation: sway3 3.5s ease-in-out infinite; }
        .c4 { background: linear-gradient(180deg, #66bb6a, #2e7d32); height: 240px; animation: sway4 3.5s ease-in-out infinite; }
        .c5 { background: linear-gradient(180deg, #ff6b6b, #d32f2f); height: 270px; animation: sway5 3.5s ease-in-out infinite; }

        @keyframes sway1 { 0%, 100% { transform: rotate(0deg) scaleY(1); } 50% { transform: rotate(3deg) scaleY(1.02); } }
        @keyframes sway2 { 0%, 100% { transform: rotate(0deg) scaleY(1); } 50% { transform: rotate(-3deg) scaleY(1.02); } }
        @keyframes sway3 { 0%, 100% { transform: rotate(0deg) scaleY(1); } 50% { transform: rotate(3.5deg) scaleY(1.02); } }
        @keyframes sway4 { 0%, 100% { transform: rotate(0deg) scaleY(1); } 50% { transform: rotate(-3.5deg) scaleY(1.02); } }
        @keyframes sway5 { 0%, 100% { transform: rotate(0deg) scaleY(1); } 50% { transform: rotate(4deg) scaleY(1.02); } }

        .circle {
            width: 85px;
            height: 85px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            border: 5px solid currentColor;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            font-weight: 900;
            box-shadow: inset 0 3px 8px rgba(255,255,255,0.9), 0 8px 20px rgba(0,0,0,0.25);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .circle.over {
            background: linear-gradient(135deg, #90EE90 0%, #32CD32 100%);
            transform: scale(1.2) rotate(15deg);
            box-shadow: inset 0 3px 8px rgba(255,255,255,0.9), 0 12px 35px rgba(50,205,50,0.8);
            animation: glow-pulse 0.5s ease;
        }

        @keyframes glow-pulse {
            0%, 100% { filter: drop-shadow(0 0 8px rgba(50,205,50,0.6)); }
            50% { filter: drop-shadow(0 0 20px rgba(50,205,50,1)); }
        }

        .numbers {
            margin-top: 45px;
            display: flex;
            justify-content: center;
            gap: 18px;
            flex-wrap: wrap;
            padding: 0 20px;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tile {
            width: 95px;
            height: 95px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            box-shadow: 0 10px 30px rgba(255,107,107,0.5);
            border-radius: 20px;
            font-size: 40px;
            font-weight: 900;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 4px solid #ff9999;
            animation: popIn 0.6s ease backwards;
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.4) rotate(-15deg); }
            to { opacity: 1; transform: scale(1) rotate(0deg); }
        }

        .tile:hover {
            transform: scale(1.15) translateY(-8px) rotate(5deg);
            box-shadow: 0 15px 40px rgba(255,107,107,0.75);
            filter: brightness(1.2) drop-shadow(0 0 10px rgba(255,215,0,0.8));
        }

        .tile:active {
            transform: scale(1.08) translateY(-3px);
            cursor: grabbing;
            box-shadow: 0 8px 15px rgba(255,107,107,0.5);
        }

        .btn {
            margin-top: 35px;
            padding: 20px 60px;
            font-size: 26px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f, #c44569);
            color: white;
            border: none;
            border-radius: 60px;
            cursor: pointer;
            font-weight: 900;
            box-shadow: 0 10px 35px rgba(255,107,107,0.5);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: slideUp 0.8s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 50px rgba(255,107,107,0.75);
            filter: brightness(1.1);
        }

        .btn:active {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 20px rgba(255,107,107,0.5);
        }

        #result {
            margin-top: 30px;
            margin-bottom: 30px;
            font-size: 36px;
            font-weight: 900;
            opacity: 0;
            transition: opacity 0.8s ease;
            padding: 25px;
            border-radius: 20px;
            background: rgba(255,255,255,0.95);
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
            letter-spacing: 1px;
        }

        #result.success {
            color: #00b894;
            background: linear-gradient(135deg, rgba(0,184,148,0.2), rgba(0,184,148,0.1));
            border: 3px solid rgba(0,184,148,0.5);
            animation: successBounce 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        #result.error {
            color: #d63031;
            background: linear-gradient(135deg, rgba(214,48,49,0.2), rgba(214,48,49,0.1));
            border: 3px solid rgba(214,48,49,0.5);
            animation: errorShake 0.6s ease;
        }

        @keyframes successBounce {
            0% { transform: scale(0.5); }
            60% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-12px) rotate(-2deg); }
            75% { transform: translateX(12px) rotate(2deg); }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 36px;
            }

            .instruction {
                font-size: 24px;
            }

            .tile {
                width: 75px;
                height: 75px;
                font-size: 32px;
            }

            .candy-image-container img {
                max-width: 350px;
            }
        }
    </style>
</head>

<body>

<div class="header">
    <h1>üéÆ SMART MATH LAB üéÆ</h1>
    <img src="images/logo.png" alt="Smart Math Lab Logo">
</div>

<div class="subtitle">üç≠ Play with Candy Numbers! üç≠</div>

<div class="candy-image-container">
    <img src="images/candy.png" alt="Candy Model" id="candyImage" ondragover="dragOverCandy(event)" ondrop="dropOnCandy(event)" ondragleave="dragLeaveCandy(event)">
</div>

<div class="game-container">
    <div class="instruction" id="title"></div>

    <div class="candy-stand">
        <div class="candies">
            <div class="candy">
                <div class="circle" id="slot1"></div>
                <div class="stick c1"></div>
            </div>

            <div class="candy">
                <div class="circle" id="slot2"></div>
                <div class="stick c2"></div>
            </div>

            <div class="candy">
                <div class="circle" id="slot3"></div>
                <div class="stick c3"></div>
            </div>

            <div class="candy">
                <div class="circle" id="slot4"></div>
                <div class="stick c4"></div>
            </div>

            <div class="candy">
                <div class="circle" id="slot5"></div>
                <div class="stick c5"></div>
            </div>
        </div>
    </div>

    <div class="numbers" id="numbers"></div>

    <button class="btn" onclick="checkAnswer()">‚ú® CHECK ANSWER ‚ú®</button>

    <div id="result"></div>
</div>

<script>
let puzzles = [
    [2, 5, 8, 3, 7],
    [12, 4, 15, 9, 1],
    [6, 18, 2, 13, 11]
];

let mode = ["ASCENDING", "DESCENDING"];

let currentPuzzle, correctOrder;

function loadPuzzle() {
    document.getElementById("result").style.opacity = 0;
    document.getElementById("result").classList.remove('success', 'error');

    currentPuzzle = puzzles[Math.floor(Math.random() * puzzles.length)];
    let gameMode = mode[Math.floor(Math.random() * mode.length)];

    document.getElementById("title").innerHTML =
        `Arrange in <span style="color:#e21818; font-size: 42px;">‚≠ê ${gameMode} ‚≠ê</span> order`;

    correctOrder = [...currentPuzzle];
    correctOrder.sort((a, b) => gameMode === "ASCENDING" ? a - b : b - a);

    loadTiles();
    clearSlots();
}

function loadTiles() {
    let area = document.getElementById("numbers");
    area.innerHTML = "";

    currentPuzzle.forEach((n, index) => {
        let div = document.createElement("div");
        div.className = "tile";
        div.draggable = true;
        div.id = "t" + n;
        div.textContent = n;
        div.style.animationDelay = (index * 0.1) + "s";

        div.addEventListener("dragstart", dragStart);

        area.appendChild(div);
    });
}

function clearSlots() {
    for (let i = 1; i <= 5; i++) {
        let s = document.getElementById("slot" + i);
        s.textContent = "";
        s.addEventListener("dragover", dragOver);
        s.addEventListener("drop", dropNumber);
        s.addEventListener("dragleave", dragLeave);
    }
}

function dragStart(e) {
    e.dataTransfer.setData("text", e.target.id);
}

function dragOver(e) {
    e.preventDefault();
    e.target.classList.add("over");
}

function dragLeave(e) {
    e.target.classList.remove("over");
}

function dragOverCandy(e) {
    e.preventDefault();
    document.getElementById("candyImage").classList.add("over");
}

function dragLeaveCandy(e) {
    document.getElementById("candyImage").classList.remove("over");
}

function dropOnCandy(e) {
    e.preventDefault();
    document.getElementById("candyImage").classList.remove("over");
}

function dropNumber(e) {
    e.preventDefault();
    e.target.classList.remove("over");

    let id = e.dataTransfer.getData("text");
    let tile = document.getElementById(id);

    e.target.textContent = tile.textContent;
}

function checkAnswer() {
    let user = [];

    for (let i = 1; i <= 5; i++) {
        let val = document.getElementById("slot" + i).textContent;
        if (val === "") return alert("Place all numbers! üìç");
        user.push(parseInt(val));
    }

    let result = document.getElementById("result");

    if (JSON.stringify(user) === JSON.stringify(correctOrder)) {
        result.classList.add('success');
        result.innerHTML = "‚úÖ CORRECT! YOU'RE AMAZING! üéâüéâüéâ";
    } else {
        result.classList.add('error');
        result.innerHTML = "‚ùå NOT QUITE! TRY AGAIN! üí™";
    }

    result.style.opacity = 1;

    setTimeout(loadPuzzle, 3000);
}

loadPuzzle();
</script>

</body>
</html>
