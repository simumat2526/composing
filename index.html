<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SMART MATH LAB ‚Äì Candy Puzzle Game</title>
<style>
body {
    margin: 0;
    font-family: Poppins, sans-serif;
    background: linear-gradient(135deg, #ffecd2, #fcb69f, #ff9a9e);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 20px;
    min-height: 100vh;
    animation: bgMove 10s infinite alternate;
}

/* Animate background gradient */
@keyframes bgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

.main-content {
    width: 70%;
    text-align: center;
}

/* HEADER */
.header {
    text-align: center;
    padding: 15px;
    background: #f87171;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    border-radius: 15px;
    margin-bottom: 20px;
    animation: headerPop 1s ease-in-out;
}

@keyframes headerPop {
    0% { transform: scale(0.7); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.header img {
    width: 100px;
    height: auto;
    margin-bottom: 10px;
    border-radius: 10px;
}

.header h1 {
    margin: 0;
    font-size: 50px;
    font-weight: 700;
    color: #fff;
}

.sub-title {
    margin-top: 10px;
    font-size: 26px;
    color: #fff;
    font-weight: 700;
    text-shadow: 1px 1px 2px #000;
}

.instruction {
    font-size: 28px;
    font-weight: 800;
    color: #fff;
    margin-bottom: 20px;
    text-shadow: 2px 2px 3px #000;
}

/* NUMBER TILES */
.number-tiles {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

.tile {
    width: 70px;
    height: 70px;
    background: #ffffffcc;
    border-radius: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 28px;
    font-weight: bold;
    cursor: grab;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    transition: transform 0.2s;
    animation: tilePop 0.5s ease forwards;
}

.tile:active {
    transform: scale(1.3);
}

@keyframes tilePop {
    0% { transform: scale(0); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

/* CANDY STAND */
.candy-stand {
    margin: auto;
    background: rgba(255,255,255,0.15);
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 6px 25px rgba(0,0,0,0.25);
    backdrop-filter: blur(3px);
}

/* SLOTS */
.slots {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 25px;
}

.slot {
    width: 100px;
    height: 100px;
    border: 3px dashed #fff;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 32px;
    color: #fff;
    font-weight: bold;
    transition: background 0.3s, transform 0.3s;
}

.slot.over {
    background: #ffffff88;
    transform: scale(1.1);
}

/* CANDIES */
.candies {
    display: flex;
    justify-content: center;
    gap: 40px;
    align-items: flex-end;
    margin-top: 20px;
}

.candy {
    display: flex;
    flex-direction: column;
    align-items: center;
    animation: candyPop 0.5s ease;
}

@keyframes candyPop {
    0% { transform: scale(0.5); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.stick {
    width: 28px;
    border-radius: 20px;
    margin-top: 10px;
    border: 5px solid #795548;
}

.c1 { background:#ffca28; height:150px; }
.c2 { background:#00bcd4; height:200px; }
.c3 { background:#8bc34a; height:230px; }
.c4 { background:#4caf50; height:260px; }
.c5 { background:#f44336; height:300px; }

.circle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: white;
    border: 5px solid #555;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 32px;
    font-weight: bold;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    transition: background 0.3s, transform 0.3s;
}

.circle.over {
    background: #d4ffd7;
    transform: scale(1.2);
}

.disabled-candy {
    opacity: 0.5;
    pointer-events: none;
}

/* BUTTONS */
.btn {
    margin: 15px 10px 0 10px;
    padding: 12px 25px;
    font-size: 20px;
    background: #f59e0b;
    color: white;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    transition: transform 0.2s;
}

.btn:hover {
    transform: scale(1.1);
}

#result {
    margin-top: 15px;
    font-size: 28px;
    font-weight: bold;
    opacity: 0;
    transition: 0.8s;
    color: #fff;
    text-shadow: 1px 1px #000;
}
</style>
</head>
<body>

<div class="main-content">
    <div class="header">
        <img src="images/logo.png" alt="Smart Math Lab Logo">
        <h1>SMART MATH LAB</h1>
    </div>

    <div class="sub-title">üç¨ Candy Puzzle Challenge! üç≠</div>
    <div class="instruction" id="title"></div>

    <!-- Number Tiles -->
    <div class="number-tiles" id="numbers"></div>

    <!-- Candy Stand -->
    <div class="candy-stand">
        <div class="slots">
            <div class="slot" id="slot1"></div>
            <div class="slot" id="slot2"></div>
            <div class="slot" id="slot3"></div>
            <div class="slot" id="slot4"></div>
            <div class="slot" id="slot5"></div>
        </div>

        <div class="candies">
            <div class="candy"><div class="circle" id="c1">?</div><div class="stick c1"></div></div>
            <div class="candy"><div class="circle" id="c2">?</div><div class="stick c2"></div></div>
            <div class="candy"><div class="circle" id="c3">?</div><div class="stick c3"></div></div>
            <div class="candy"><div class="circle" id="c4">?</div><div class="stick c4"></div></div>
            <div class="candy"><div class="circle" id="c5">?</div><div class="stick c5"></div></div>
        </div>

        <div>
            <button class="btn" onclick="checkAnswer()">CHECK</button>
            <button class="btn" onclick="showAnswer()">SHOW ANSWER</button>
            <button class="btn" onclick="retryPuzzle()">RETRY</button>
        </div>
        <div id="result"></div>
    </div>
</div>

<script>
const puzzles = [
    {numbers: [2,5,8,3,7], answer: [8,3,7,2,5], question: "Drag numbers to candies from largest to smallest."},
    {numbers: [10,6,14,9,2], answer: [14,10,9,6,2], question: "Arrange numbers on candies largest to smallest."},
    {numbers: [1,4,3,5,2], answer: [5,4,3,2,1], question: "Place numbers on candies from biggest to smallest."}
];
let currentIndex = 0;

function loadPuzzle(){
    const puzzle = puzzles[currentIndex];
    document.getElementById("title").innerText = puzzle.question;

    // Number tiles
    const numbersDiv = document.getElementById("numbers");
    numbersDiv.innerHTML = "";
    puzzle.numbers.forEach(n=>{
        const tile = document.createElement("div");
        tile.className="tile";
        tile.draggable=true;
        tile.id="num"+n;
        tile.innerText=n;
        tile.addEventListener("dragstart", e => e.dataTransfer.setData("text", tile.id));
        numbersDiv.appendChild(tile);
    });

    // Candies reset
    document.querySelectorAll(".circle").forEach(c=>{
        c.textContent="?";
        c.classList.remove("disabled-candy");
    });

    document.getElementById("result").style.opacity=0;
}

// Drag & Drop
document.querySelectorAll(".circle").forEach(c=>{
    c.addEventListener("dragover", e=>{ e.preventDefault(); c.classList.add("over"); });
    c.addEventListener("dragleave", e=> c.classList.remove("over"));
    c.addEventListener("drop", e=>{
        e.preventDefault(); c.classList.remove("over");
        if(c.textContent!=="?") return;
        const id = e.dataTransfer.getData("text");
        const tile = document.getElementById(id);
        c.textContent = tile.textContent;
        tile.classList.add("disabled-candy");
        tile.draggable=false;
    });
});

// Check answer
function checkAnswer(){
    const puzzle = puzzles[currentIndex];
    const user = [...document.querySelectorAll(".circle")].map(c=>parseInt(c.textContent));
    if(user.includes(NaN)) return alert("Drag all numbers!");

    const result = document.getElementById("result");
    if(JSON.stringify(user)===JSON.stringify(puzzle.answer)){
        result.style.color="green";
        result.innerText="‚úî Correct! Well done üéâ";
    } else {
        result.style.color="red";
        result.innerText="‚úò Wrong! Try again.";
    }
    result.style.opacity=1;

    // Next puzzle
    setTimeout(()=>{
        currentIndex = (currentIndex+1)%puzzles.length;
        loadPuzzle();
    },2000);
}

// Show Answer
function showAnswer(){
    const puzzle = puzzles[currentIndex];
    document.querySelectorAll(".circle").forEach((c,i)=>{
        c.textContent = puzzle.answer[i];
        c.classList.add("disabled-candy");
    });
}

// Retry
function retryPuzzle(){
    loadPuzzle();
}

// Initial
loadPuzzle();
</script>

</body>
</html>
